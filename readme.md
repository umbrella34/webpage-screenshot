# ğŸ“· ç½‘é¡µæˆªå›¾ | ç½‘é¡µå¿«ç…§ | é•¿æˆªå›¾

ä½¿ç”¨ `puppeteer` æ— å¤´æµè§ˆå™¨è·å–å±å¹•æˆªå›¾(é•¿å›¾æ ¹æ® `document.body.clientHeight` è®¡ç®—)

ä½¿ç”¨ `puppeteer` å°†ä¸‹è½½ Chromium çš„ bundle ç‰ˆæœ¬ï¼Œæ ¹æ®æ“ä½œç³»ç»Ÿçš„ä¸åŒï¼Œè¯¥ç‰ˆæœ¬å¤§çº¦ 180 MB è‡³ 300 MB

è¾ƒé•¿çš„é¡µé¢æˆªå›¾æ—¶é—´å¤§çº¦åœ¨ 15s å·¦å³ï¼Œä¸»è¦æ¶ˆè€—åœ¨åŠ è½½é¡µé¢å’Œæˆªå›¾è¿‡ç¨‹ä¸­

äº§ç”Ÿçš„å›¾ç‰‡éœ€è¦è‡ªå·±æ¸…é™¤ï¼Œå¯ä»¥è¿”å›å›¾ç‰‡ååˆ é™¤æˆ–å†™ä¸ªå®šæ—¶ä»»åŠ¡è‡ªåŠ¨åˆ é™¤

> Puppeteer å…è®¸ä½ ä»¥ç¼–ç¨‹æ–¹å¼æ“çºµæµè§ˆå™¨ï¼Œå°±åƒæ“çºµæœ¨å¶ä¸€æ ·ã€‚å®ƒé€šè¿‡ä¸ºå¼€å‘äººå‘˜æä¾›é«˜çº§ API æ¥é»˜è®¤æ§åˆ¶æ— å¤´ç‰ˆæœ¬çš„ Chromeã€‚

### ğŸ‰ GET /screenshot?:url[&:size]

Koa API å¯ä»¥éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šè¿›è¡Œè°ƒç”¨

- url: `https://xxxx.xxx?xxxx`
- size: å¯é€‰ æˆªå›¾å°ºå¯¸
  - `iPhoneX` `375-812`
  - `iPhone` `414-736` `iPhone 6/7/8 Plus`
  - `iPad` `768-1024`
  - `default` `1366-768` `é»˜è®¤ æ™®é€šçš„PCç”µè„‘`
  - `maxLarge` `1920-1080` `ç›®å‰å¸¸ç”¨è®¾å¤‡ä¸­æœ€å¤§çš„å°ºå¯¸ ç½‘é¡µæœ€å¸¸ç”¨çš„è®¾è®¡å°ºå¯¸`
  - `MacBook_15` `1440-900` `15å¯¸MacBook Proï¼Œå¾ˆå¤šUIè®¾è®¡å¸ˆé¦–é€‰`
  - `MacBook_13` `1280-800` `13å¯¸MacBook Pro`


### ğŸ’¥ centos ä¸‹è£… puppeteer æŠ¥é”™ä¸èƒ½è¿è¡Œ

ç¼ºå°‘ä¾èµ–åº“

```shell
yum install pango.x86_64 libXcomposite.x86_64 libXcursor.x86_64 libXdamage.x86_64 libXext.x86_64 libXi.x86_64 libXtst.x86_64 cups-libs.x86_64 libXScrnSaver.x86_64 libXrandr.x86_64 GConf2.x86_64 alsa-lib.x86_64 atk.x86_64 gtk3.x86_64 -y
```

ç„¶åå¯åŠ¨æµè§ˆå™¨ä»£ç åŠ ä¸Šå‚æ•°ï¼š

```js
const browser = await puppeteer.launch({args: ['--no-sandbox', '--disable-setuid-sandbox']})
```


### ğŸ² æˆªå›¾ä¸­æ–‡ä¹±ç 

æˆªå›¾æŸç½‘å€æ—¶å‘ç°ç”Ÿæˆçš„å›¾ç‰‡ï¼Œä¸­æ–‡å­—ä½“å¤„éƒ½æ˜¯æ–¹æ¡†ã€‚

åŸæ¥centosç³»ç»Ÿé»˜è®¤ä¸æ”¯æŒä¸­æ–‡å­—ä½“çš„ï¼Œäºæ˜¯æˆ‘å»å­¦äº†ä¸‹Linuxçš„å­—ä½“å®‰è£…

ç‚¹å‡»é˜…è¯»ï¼š[Linuxä¸­æ–‡å­—ä½“å®‰è£…](https://ux34.cn/pages/28f903/)